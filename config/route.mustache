/**
 * This file is automatically generated from `/config/route.mustache`,
 * DO NOT modify this file directly.
 */

import module from './module';

module.config(/* @ngInject */($futureStateProvider, $locationProvider, $urlRouterProvider) => {
    const futureStates = [
    {{#states}}
        {
            stateName: '{{name}}',
            url: '{{{url}}}',
            type: '{{type}}',
        },
    {{/states}}
    ];

    futureStates.forEach((futureState) => {
        $futureStateProvider.futureState(futureState);
    });

    $futureStateProvider.stateFactory('asyncState', /* @ngInject */($q, futureState) => {
        const d = $q.defer();

        function moduleResolve(mod) {
            const state = {
                name: futureState.stateName,
                url: futureState.url,
                controller: `${futureState.stateName}Ctrl`,
                template: mod.template,
            };
            d.resolve(state);
        }

        switch (futureState.stateName) {
        {{#states}}
        case '{{name}}':
            require.ensure(['./{{name}}/index'], (require) => {
                moduleResolve(require('./{{name}}/index'));
            });
            break;
        {{/states}}
        default:
            break;
        }

        return d.promise;
    });

    /**
    * looks like futureState is not compatible with urlRouterProvider.otherwise
    */
    $urlRouterProvider.otherwise('/');

    // 启用 html5 history
    $locationProvider.html5Mode(true);
});
